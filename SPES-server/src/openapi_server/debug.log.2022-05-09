loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00025s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002716s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004061s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.005299s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.006397s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.007482s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.008786s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.01006s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00026s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.001997s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.003562s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.005157s ago] {'typname': 'marital_status_codes'}
COMMIT
172.22.0.1:39336 - "OPTIONS /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[generated in 0.00021s] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
trapped unexpected response from 'os_crypt' backend: verify('test', b'$2$04$5BJqKfqMQvV7nS.yUguNcuRfMMOXK0xPWavM7pOzjEi5ze5T1k8/S'):
Traceback (most recent call last):
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 303, in safe_verify
    return verify(secret, hash)
  File "/.venv/lib/python3.9/site-packages/passlib/utils/handlers.py", line 792, in verify
    return consteq(self._calc_checksum(secret), chk)
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 837, in _calc_checksum
    raise uh.exc.InternalBackendError(
passlib.exc.InternalBackendError: crypt.crypt() failed for unknown reason; passlib recommends running `pip install bcrypt` for general bcrypt support.(config=<hash <class 'str'> value omitted>, secret=<hash <class 'bytes'> value omitted>)
'os_crypt' backend lacks $2$ support, enabling workaround
172.22.0.1:39340 - "POST /auth HTTP/1.1" 200
172.22.0.1:39336 - "OPTIONS /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[generated in 0.00035s] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:39340 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:39348 - "OPTIONS /wallet/pf/735e4ba5-5abb-4428-b2f3-a96555f7c0a6/docs HTTP/1.1" 200
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[generated in 0.00029s] {'pf_id_1': '735e4ba5-5abb-4428-b2f3-a96555f7c0a6'}
ROLLBACK
172.22.0.1:39352 - "GET /wallet/pf/735e4ba5-5abb-4428-b2f3-a96555f7c0a6/docs HTTP/1.1" 500
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 89.55s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:39882 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:39890 - "OPTIONS /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 200
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[cached since 81.8s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:39882 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[cached since 115.2s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:39946 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[cached since 120.6s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:39978 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[cached since 411.3s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:40302 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[cached since 478.7s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:40362 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[cached since 527.6s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:40400 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00019s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.001336s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002117s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.00286s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.003602s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004339s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.00509s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.005846s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00019s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.001318s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.002198s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.003533s ago] {'typname': 'marital_status_codes'}
COMMIT
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[generated in 0.00027s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:40618 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[cached since 15.51s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:40672 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
172.22.0.1:40968 - "OPTIONS /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 200
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[cached since 219.4s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:40972 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[cached since 242.7s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:41006 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 500
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00019s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.001289s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002071s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002824s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.003635s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004419s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.005161s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.006061s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00027s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.001843s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.002911s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.004181s ago] {'typname': 'marital_status_codes'}
COMMIT
BEGIN (implicit)
SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document 
WHERE person_document.pf_id = %(pf_id_1)s
[generated in 0.00036s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:41526 - "GET /wallet/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f/docs HTTP/1.1" 200
172.22.0.1:41670 - "OPTIONS /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[generated in 0.00030s] {'username_1': 'med', 'param_1': 1}
ROLLBACK
trapped unexpected response from 'os_crypt' backend: verify('test', b'$2$04$5BJqKfqMQvV7nS.yUguNcuRfMMOXK0xPWavM7pOzjEi5ze5T1k8/S'):
Traceback (most recent call last):
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 303, in safe_verify
    return verify(secret, hash)
  File "/.venv/lib/python3.9/site-packages/passlib/utils/handlers.py", line 792, in verify
    return consteq(self._calc_checksum(secret), chk)
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 837, in _calc_checksum
    raise uh.exc.InternalBackendError(
passlib.exc.InternalBackendError: crypt.crypt() failed for unknown reason; passlib recommends running `pip install bcrypt` for general bcrypt support.(config=<hash <class 'str'> value omitted>, secret=<hash <class 'bytes'> value omitted>)
'os_crypt' backend lacks $2$ support, enabling workaround
172.22.0.1:41670 - "POST /auth HTTP/1.1" 400
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 6.7s ago] {'username_1': 'med', 'param_1': 1}
ROLLBACK
172.22.0.1:41674 - "POST /auth HTTP/1.1" 400
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 221.4s ago] {'username_1': 'med', 'param_1': 1}
ROLLBACK
172.22.0.1:41998 - "POST /auth HTTP/1.1" 400
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 258.5s ago] {'username_1': 'med', 'param_1': 1}
ROLLBACK
172.22.0.1:42054 - "POST /auth HTTP/1.1" 200
172.22.0.1:42054 - "OPTIONS /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[generated in 0.00038s] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:42058 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:42074 - "OPTIONS /reports/upload HTTP/1.1" 200
Calling on_part_begin with no data
Calling on_header_field with data[42:61]
Calling on_header_value with data[63:86]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[90:126]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[170:189]
Calling on_header_value with data[191:214]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[218:224]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[268:287]
Calling on_header_value with data[289:365]
Calling on_header_end with no data
Calling on_header_field with data[367:379]
Calling on_header_value with data[381:396]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[400:71149]
Calling on_part_data with data[0:1]
Calling on_part_data with data[71150:89088]
Calling on_part_data with data[0:34655]
Calling on_part_data with data[0:1]
Calling on_part_data with data[34656:156811]
Calling on_part_data with data[0:1]
Calling on_part_data with data[156812:262144]
Calling on_part_data with data[0:33187]
Calling on_part_data with data[0:1]
Calling on_part_data with data[33188:40938]
Calling on_part_data with data[0:1]
Calling on_part_data with data[40939:69202]
Calling on_part_data with data[0:1]
Calling on_part_data with data[69203:160686]
Calling on_part_data with data[0:1]
Calling on_part_data with data[160687:262144]
Calling on_part_data with data[0:9090]
Calling on_part_data with data[0:1]
Calling on_part_data with data[9091:57085]
Calling on_part_data with data[0:1]
Calling on_part_data with data[57086:81581]
Calling on_part_data with data[0:1]
Calling on_part_data with data[81582:220782]
Calling on_part_data with data[0:1]
Calling on_part_data with data[220783:262144]
Calling on_part_data with data[0:2354]
Calling on_part_data with data[0:1]
Calling on_part_data with data[2355:262144]
Calling on_part_data with data[0:214175]
Calling on_part_data with data[0:1]
Calling on_part_data with data[214176:262144]
Calling on_part_data with data[0:51184]
Calling on_part_data with data[0:1]
Calling on_part_data with data[51185:215472]
Calling on_part_data with data[0:1]
Calling on_part_data with data[215473:262144]
Calling on_part_data with data[0:105159]
Calling on_part_end with no data
Calling on_end with no data
BEGIN (implicit)
INSERT INTO person_report (id, pf_id, title, upload_date, path, upload_by) VALUES (%(id)s, %(pf_id)s, %(title)s, %(upload_date)s, %(path)s, %(upload_by)s)
[generated in 0.00024s] {'id': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'pf_id': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f', 'title': 'titolo', 'upload_date': datetime.date(2022, 5, 9), 'path': '../../reports/2a9b15a5-de12-46e7-b624-08a2b1fe75d8.pdf', 'upload_by': '8e9f97ec-7030-4c13-933c-7e3e1ad97628'}
COMMIT
BEGIN (implicit)
SELECT person_report.id, person_report.pf_id, person_report.title, person_report.upload_date, person_report.path, person_report.upload_by 
FROM person_report 
WHERE person_report.id = %(pk_1)s
[generated in 0.00025s] {'pk_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:42078 - "POST /reports/upload HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 36.6s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:42078 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:42082 - "OPTIONS /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:42086 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[generated in 0.00030s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:42078 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:42090 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 312.1s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
172.22.0.1:42284 - "POST /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 53.62s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:42288 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:42328 - "OPTIONS /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 347.4s ago] {'username_1': 'med', 'param_1': 1}
ROLLBACK
172.22.0.1:42332 - "POST /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 88.89s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:42332 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 60.99s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:42336 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:42340 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:42346 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[generated in 0.00162s] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:42340 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s, %(id_1_2)s)
[cached since 8.847s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_2': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:42352 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s, %(id_1_2)s, %(id_1_3)s)
[cached since 41.4s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_2': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_3': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:42384 - "POST /session/reports HTTP/1.1" 500
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00020s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.001612s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002559s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.00362s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004908s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.006153s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.007375s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.008693s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00034s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.00218s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.00369s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.005513s ago] {'typname': 'marital_status_codes'}
COMMIT
172.22.0.1:44700 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s, %(id_1_2)s, %(id_1_3)s, %(id_1_4)s)
[generated in 0.00056s] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_2': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_3': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_4': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:44704 - "POST /session/reports HTTP/1.1" 500
172.22.0.1:44748 - "OPTIONS /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:44752 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[generated in 0.00038s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:44756 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[cached since 94.81s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:44870 - "POST /session/reports HTTP/1.1" 500
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00022s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.001789s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002886s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004002s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.00514s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.006261s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.007194s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.008117s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00030s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.001857s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.002962s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.004378s ago] {'typname': 'marital_status_codes'}
COMMIT
172.22.0.1:37516 - "OPTIONS /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:37520 - "OPTIONS /session/reports HTTP/1.1" 200
172.22.0.1:37524 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 500
172.22.0.1:37528 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:37640 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 500
172.22.0.1:37644 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:37768 - "OPTIONS /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[generated in 0.00027s] {'username_1': 'med', 'param_1': 1}
ROLLBACK
trapped unexpected response from 'os_crypt' backend: verify('test', b'$2$04$5BJqKfqMQvV7nS.yUguNcuRfMMOXK0xPWavM7pOzjEi5ze5T1k8/S'):
Traceback (most recent call last):
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 303, in safe_verify
    return verify(secret, hash)
  File "/.venv/lib/python3.9/site-packages/passlib/utils/handlers.py", line 792, in verify
    return consteq(self._calc_checksum(secret), chk)
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 837, in _calc_checksum
    raise uh.exc.InternalBackendError(
passlib.exc.InternalBackendError: crypt.crypt() failed for unknown reason; passlib recommends running `pip install bcrypt` for general bcrypt support.(config=<hash <class 'str'> value omitted>, secret=<hash <class 'bytes'> value omitted>)
'os_crypt' backend lacks $2$ support, enabling workaround
172.22.0.1:37768 - "POST /auth HTTP/1.1" 200
172.22.0.1:37768 - "OPTIONS /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[generated in 0.00052s] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:37776 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[generated in 0.00034s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:37878 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:37882 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 67.82s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:38584 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:38588 - "GET /session/reports HTTP/1.1" 500
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00035s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002308s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.003583s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004789s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.00577s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.006914s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.008158s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.009421s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00025s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.001821s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.003073s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.00469s ago] {'typname': 'marital_status_codes'}
COMMIT
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[generated in 0.00041s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:35596 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:35600 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 8.52s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:35700 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:35704 - "GET /session/reports HTTP/1.1" 500
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00025s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.001858s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002904s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.003886s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004994s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.00601s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.007092s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.008131s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00027s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.001775s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.003061s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.004639s ago] {'typname': 'marital_status_codes'}
COMMIT
172.22.0.1:39806 - "OPTIONS /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:39810 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[generated in 0.00035s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:39814 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:39818 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 18.25s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:40114 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:40118 - "GET /session/reports HTTP/1.1" 500
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00024s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.001788s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002767s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.003662s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004709s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.005613s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.006625s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.007705s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00027s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.001782s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.002884s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.004254s ago] {'typname': 'marital_status_codes'}
COMMIT
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[generated in 0.00046s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:42178 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:42182 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:42178 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 3.375s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:42182 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 22.37s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:42408 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:42412 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:42434 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[generated in 0.00091s] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:42412 - "POST /session/reports HTTP/1.1" 500
172.22.0.1:43916 - "OPTIONS /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[generated in 0.00033s] {'username_1': 'med', 'param_1': 1}
ROLLBACK
trapped unexpected response from 'os_crypt' backend: verify('test', b'$2$04$5BJqKfqMQvV7nS.yUguNcuRfMMOXK0xPWavM7pOzjEi5ze5T1k8/S'):
Traceback (most recent call last):
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 303, in safe_verify
    return verify(secret, hash)
  File "/.venv/lib/python3.9/site-packages/passlib/utils/handlers.py", line 792, in verify
    return consteq(self._calc_checksum(secret), chk)
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 837, in _calc_checksum
    raise uh.exc.InternalBackendError(
passlib.exc.InternalBackendError: crypt.crypt() failed for unknown reason; passlib recommends running `pip install bcrypt` for general bcrypt support.(config=<hash <class 'str'> value omitted>, secret=<hash <class 'bytes'> value omitted>)
'os_crypt' backend lacks $2$ support, enabling workaround
172.22.0.1:43916 - "POST /auth HTTP/1.1" 200
172.22.0.1:43916 - "OPTIONS /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[generated in 0.00044s] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:43924 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 178.4s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:43998 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:44002 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:44002 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:44002 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[cached since 166s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:44118 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 222s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:44426 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:44430 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 60.88s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:44510 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 233.8s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:44510 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:44542 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[cached since 215.9s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:44604 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s, %(id_1_2)s)
[cached since 261.3s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_2': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:45006 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s, %(id_1_2)s, %(id_1_3)s)
[cached since 273.9s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_2': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_3': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:45116 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 309.1s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:45238 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:45242 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[cached since 304.9s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:45428 - "POST /session/reports HTTP/1.1" 500
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00022s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.001619s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002642s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.003815s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.00509s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.006268s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.007546s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.008875s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00029s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.002271s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.003565s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.004967s ago] {'typname': 'marital_status_codes'}
COMMIT
172.22.0.1:51538 - "OPTIONS /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:51542 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[generated in 0.00031s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:51546 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:51550 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:51658 - "OPTIONS /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:51662 - "OPTIONS /session/reports HTTP/1.1" 200
172.22.0.1:51670 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 7.456s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:51666 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:51874 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[generated in 0.00170s] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:51878 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s, %(id_1_2)s)
[cached since 6.132s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_2': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:51934 - "POST /session/reports HTTP/1.1" 500
172.22.0.1:52036 - "OPTIONS /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[generated in 0.00082s] {'username_1': 'med', 'param_1': 1}
ROLLBACK
trapped unexpected response from 'os_crypt' backend: verify('test', b'$2$04$5BJqKfqMQvV7nS.yUguNcuRfMMOXK0xPWavM7pOzjEi5ze5T1k8/S'):
Traceback (most recent call last):
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 303, in safe_verify
    return verify(secret, hash)
  File "/.venv/lib/python3.9/site-packages/passlib/utils/handlers.py", line 792, in verify
    return consteq(self._calc_checksum(secret), chk)
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 837, in _calc_checksum
    raise uh.exc.InternalBackendError(
passlib.exc.InternalBackendError: crypt.crypt() failed for unknown reason; passlib recommends running `pip install bcrypt` for general bcrypt support.(config=<hash <class 'str'> value omitted>, secret=<hash <class 'bytes'> value omitted>)
'os_crypt' backend lacks $2$ support, enabling workaround
172.22.0.1:52036 - "POST /auth HTTP/1.1" 200
172.22.0.1:52036 - "OPTIONS /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[generated in 0.00040s] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:52044 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 49.08s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:52164 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:52168 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[cached since 42.15s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:52298 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s, %(id_1_2)s)
[cached since 116.8s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_2': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:52936 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s, %(id_1_2)s, %(id_1_3)s)
[cached since 135.2s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_2': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_3': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:53096 - "POST /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 218.8s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:53704 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:53708 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:56498 - "GET /session/reports HTTP/1.1" 500
172.22.0.1:56498 - "GET /session/reports HTTP/1.1" 500
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 543.8s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:56610 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:56614 - "GET /session/reports HTTP/1.1" 500
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00021s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.001515s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002528s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.003428s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004242s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.005125s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.006232s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.007555s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00029s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.001878s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.003302s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.004841s ago] {'typname': 'marital_status_codes'}
COMMIT
172.22.0.1:58538 - "OPTIONS /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:58542 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[generated in 0.00043s] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:58546 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:58550 - "GET /session/reports HTTP/1.1" 404
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 14.07s ago] {'pf_id_1': '7ddcce64-02f9-4a53-ab01-e5a5baa63f5f'}
ROLLBACK
172.22.0.1:58734 - "GET /reports/pf/7ddcce64-02f9-4a53-ab01-e5a5baa63f5f HTTP/1.1" 200
172.22.0.1:58738 - "GET /session/reports HTTP/1.1" 404
172.22.0.1:58884 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[generated in 0.00130s] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:58888 - "POST /session/reports HTTP/1.1" 200
172.22.0.1:59072 - "GET /session/reports HTTP/1.1" 200
172.22.0.1:59072 - "GET /session/reports HTTP/1.1" 200
172.22.0.1:59118 - "OPTIONS /permissions HTTP/1.1" 200
172.22.0.1:59072 - "GET /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM permission 
WHERE permission.user_id = %(user_id_1)s AND permission.document_id IN (%(document_id_1_1)s)
[generated in 0.00068s] {'user_id_1': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'document_id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
BEGIN (implicit)
INSERT INTO permission (user_id, document_id, permission, created, pending) VALUES (%(user_id)s, %(document_id)s, %(permission)s, %(created)s, %(pending)s)
[generated in 0.00035s] {'user_id': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'document_id': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'permission': False, 'created': datetime.date(2022, 5, 9), 'pending': True}
COMMIT
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM permission 
WHERE permission.user_id = %(user_id_1)s AND permission.document_id IN (NULL) AND (1 != 1)
[cached since 0.01242s ago] {'user_id_1': '8e9f97ec-7030-4c13-933c-7e3e1ad97628'}
ROLLBACK
172.22.0.1:59122 - "POST /permissions HTTP/1.1" 200
172.22.0.1:59072 - "DELETE /session/reports HTTP/1.1" 200
172.22.0.1:59072 - "GET /session/reports HTTP/1.1" 404
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s, %(id_1_2)s)
[cached since 33.12s ago] {'id_1_1': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8', 'id_1_2': '2a9b15a5-de12-46e7-b624-08a2b1fe75d8'}
ROLLBACK
172.22.0.1:59174 - "POST /session/reports HTTP/1.1" 200
172.22.0.1:59812 - "GET /session/reports HTTP/1.1" 200
192.168.1.228:58870 - "POST /auth/ HTTP/1.1" 307
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[generated in 0.00025s] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
trapped unexpected response from 'os_crypt' backend: verify('test', b'$2$04$5BJqKfqMQvV7nS.yUguNcuRfMMOXK0xPWavM7pOzjEi5ze5T1k8/S'):
Traceback (most recent call last):
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 303, in safe_verify
    return verify(secret, hash)
  File "/.venv/lib/python3.9/site-packages/passlib/utils/handlers.py", line 792, in verify
    return consteq(self._calc_checksum(secret), chk)
  File "/.venv/lib/python3.9/site-packages/passlib/handlers/bcrypt.py", line 837, in _calc_checksum
    raise uh.exc.InternalBackendError(
passlib.exc.InternalBackendError: crypt.crypt() failed for unknown reason; passlib recommends running `pip install bcrypt` for general bcrypt support.(config=<hash <class 'str'> value omitted>, secret=<hash <class 'bytes'> value omitted>)
'os_crypt' backend lacks $2$ support, enabling workaround
192.168.1.228:58870 - "POST /auth HTTP/1.1" 200
192.168.1.228:58872 - "POST /pf/ HTTP/1.1" 307
BEGIN (implicit)
INSERT INTO "user" (id, username, email, pwd, role, first_access) VALUES (%(id)s, %(username)s, %(email)s, %(pwd)s, %(role)s, %(first_access)s)
[generated in 0.00026s] {'id': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc', 'username': 'Sme.Nelu357', 'email': None, 'pwd': '$2b$12$MkvUyl0f8HkXAmAIqscQiui5oQP44xQOofH4PWLf99xV7PSEesbca', 'role': 'PF', 'first_access': True}
INSERT INTO person (id, created_by, owner_id, user_id, is_dead, death_date, cf, cui_code, firstname, lastname, fullname, nicknames, gender, birth_date, verified, created, updated, sanitary_district_id, is_anonymous, is_foreign, birth_city, birth_geoarea_id, birth_nation_id) VALUES (%(id)s, %(created_by)s, %(owner_id)s, %(user_id)s, %(is_dead)s, %(death_date)s, %(cf)s, %(cui_code)s, %(firstname)s, %(lastname)s, %(fullname)s, %(nicknames)s, %(gender)s, %(birth_date)s, %(verified)s, %(created)s, %(updated)s, %(sanitary_district_id)s, %(is_anonymous)s, %(is_foreign)s, %(birth_city)s, %(birth_geoarea_id)s, %(birth_nation_id)s)
[generated in 0.00044s] {'id': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'created_by': '498be88a-188b-41c9-90e5-9e5fdbefdba2', 'owner_id': '498be88a-188b-41c9-90e5-9e5fdbefdba2', 'user_id': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc', 'is_dead': False, 'death_date': None, 'cf': None, 'cui_code': '', 'firstname': 'Smerea', 'lastname': 'Nelu', 'fullname': 'Smerea Nelu', 'nicknames': None, 'gender': 'M', 'birth_date': datetime.date(1985, 12, 10), 'verified': False, 'created': datetime.date(2022, 5, 9), 'updated': datetime.date(2022, 5, 9), 'sanitary_district_id': None, 'is_anonymous': False, 'is_foreign': False, 'birth_city': None, 'birth_geoarea_id': None, 'birth_nation_id': 'ROU'}
COMMIT
BEGIN (implicit)
SELECT person.id, person.created_by, person.owner_id, person.user_id, person.is_dead, person.death_date, person.cf, person.cui_code, person.firstname, person.lastname, person.fullname, person.nicknames, person.gender, person.birth_date, person.verified, person.created, person.updated, person.sanitary_district_id, person.is_anonymous, person.is_foreign, person.birth_city, person.birth_geoarea_id, person.birth_nation_id 
FROM person 
WHERE person.id = %(pk_1)s
[generated in 0.00022s] {'pk_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89'}
ROLLBACK
192.168.1.228:58872 - "POST /pf HTTP/1.1" 201
192.168.1.228:59132 - "POST /auth/ HTTP/1.1" 307
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 18.33s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
192.168.1.228:59132 - "POST /auth HTTP/1.1" 200
192.168.1.228:59134 - "GET /pf/6b45a501-8297-4b61-b2d2-a37719bbcf89/ HTTP/1.1" 307
BEGIN (implicit)
SELECT anon_1.person_id AS anon_1_person_id, anon_1.person_created_by AS anon_1_person_created_by, anon_1.person_owner_id AS anon_1_person_owner_id, anon_1.person_user_id AS anon_1_person_user_id, anon_1.person_is_dead AS anon_1_person_is_dead, anon_1.person_death_date AS anon_1_person_death_date, anon_1.person_cf AS anon_1_person_cf, anon_1.person_cui_code AS anon_1_person_cui_code, anon_1.person_firstname AS anon_1_person_firstname, anon_1.person_lastname AS anon_1_person_lastname, anon_1.person_fullname AS anon_1_person_fullname, anon_1.person_nicknames AS anon_1_person_nicknames, anon_1.person_gender AS anon_1_person_gender, anon_1.person_birth_date AS anon_1_person_birth_date, anon_1.person_verified AS anon_1_person_verified, anon_1.person_created AS anon_1_person_created, anon_1.person_updated AS anon_1_person_updated, anon_1.person_sanitary_district_id AS anon_1_person_sanitary_district_id, anon_1.person_is_anonymous AS anon_1_person_is_anonymous, anon_1.person_is_foreign AS anon_1_person_is_foreign, anon_1.person_birth_city AS anon_1_person_birth_city, anon_1.person_birth_geoarea_id AS anon_1_person_birth_geoarea_id, anon_1.person_birth_nation_id AS anon_1_person_birth_nation_id, person_address_1.id AS person_address_1_id, person_address_1.created_by AS person_address_1_created_by, person_address_1.owner_id AS person_address_1_owner_id, person_address_1.pf_id AS person_address_1_pf_id, person_address_1.address_type_id AS person_address_1_address_type_id, person_address_1.geoarea_id AS person_address_1_geoarea_id, person_address_1.address AS person_address_1_address, person_address_1.from_date AS person_address_1_from_date, person_address_1.created AS person_address_1_created, person_address_1.updated AS person_address_1_updated, person_citizenship_1.id AS person_citizenship_1_id, person_citizenship_1.created_by AS person_citizenship_1_created_by, person_citizenship_1.owner_id AS person_citizenship_1_owner_id, person_citizenship_1.pf_id AS person_citizenship_1_pf_id, person_citizenship_1.nation_id AS person_citizenship_1_nation_id, person_citizenship_1.from_date AS person_citizenship_1_from_date, person_citizenship_1.created AS person_citizenship_1_created, person_citizenship_1.updated AS person_citizenship_1_updated, person_marital_status_1.id AS person_marital_status_1_id, person_marital_status_1.created_by AS person_marital_status_1_created_by, person_marital_status_1.owner_id AS person_marital_status_1_owner_id, person_marital_status_1.pf_id AS person_marital_status_1_pf_id, person_marital_status_1.marital_status_code AS person_marital_status_1_marital_status_code, person_marital_status_1.from_date AS person_marital_status_1_from_date, person_marital_status_1.created AS person_marital_status_1_created, person_marital_status_1.updated AS person_marital_status_1_updated 
FROM (SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.id = %(id_1)s 
 LIMIT %(param_1)s) AS anon_1 LEFT OUTER JOIN person_address AS person_address_1 ON anon_1.person_id = person_address_1.pf_id LEFT OUTER JOIN person_citizenship AS person_citizenship_1 ON anon_1.person_id = person_citizenship_1.pf_id LEFT OUTER JOIN person_marital_status AS person_marital_status_1 ON anon_1.person_id = person_marital_status_1.pf_id
[generated in 0.00029s] {'id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'param_1': 1}
ROLLBACK
192.168.1.228:59134 - "GET /pf/6b45a501-8297-4b61-b2d2-a37719bbcf89 HTTP/1.1" 200
192.168.1.228:59136 - "POST /auth/ HTTP/1.1" 307
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 18.82s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
192.168.1.228:59136 - "POST /auth HTTP/1.1" 200
192.168.1.228:59146 - "PATCH /pf/6b45a501-8297-4b61-b2d2-a37719bbcf89/ HTTP/1.1" 307
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.id = %(id_1)s 
 LIMIT %(param_1)s
[generated in 0.00025s] {'id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'param_1': 1}
COMMIT
BEGIN (implicit)
SELECT person.id, person.created_by, person.owner_id, person.user_id, person.is_dead, person.death_date, person.cf, person.cui_code, person.firstname, person.lastname, person.fullname, person.nicknames, person.gender, person.birth_date, person.verified, person.created, person.updated, person.sanitary_district_id, person.is_anonymous, person.is_foreign, person.birth_city, person.birth_geoarea_id, person.birth_nation_id 
FROM person 
WHERE person.id = %(pk_1)s
[cached since 18.53s ago] {'pk_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89'}
ROLLBACK
192.168.1.228:59146 - "PATCH /pf/6b45a501-8297-4b61-b2d2-a37719bbcf89 HTTP/1.1" 200
172.22.0.1:43486 - "OPTIONS /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 58.3s ago] {'username_1': 'Sme.Nelu357', 'param_1': 1}
ROLLBACK
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".id = %(id_1)s 
 LIMIT %(param_1)s
[generated in 0.00035s] {'id_1': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc', 'param_1': 1}
UPDATE "user" SET first_access=%(first_access)s WHERE "user".id = %(user_id)s
[generated in 0.00030s] {'first_access': False, 'user_id': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc'}
COMMIT
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[generated in 0.00025s] {'user_id_1': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc', 'param_1': 1}
ROLLBACK
172.22.0.1:43490 - "POST /auth HTTP/1.1" 200
172.22.0.1:43628 - "OPTIONS /user/pf HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM (SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.id = %(id_1)s) AS anon_1 JOIN "user" ON "user".id = anon_1.person_user_id 
 LIMIT %(param_1)s
[generated in 0.00025s] {'id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'param_1': 1}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/user_repository.py", line 71, in update_user_by_pf_id
    raise PersonNotFoundError(entity_id=pf_id)
repositories.repository_exceptions.PersonNotFoundError: Person not found, id: 6b45a501-8297-4b61-b2d2-a37719bbcf89
ROLLBACK
172.22.0.1:43632 - "PATCH /user/pf HTTP/1.1" 500
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM (SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.id = %(id_1)s) AS anon_1 JOIN "user" ON "user".id = anon_1.person_user_id 
 LIMIT %(param_1)s
[cached since 13.16s ago] {'id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'param_1': 1}
UPDATE "user" SET pwd=%(pwd)s WHERE "user".id = %(user_id)s
[generated in 0.00026s] {'pwd': '$2b$12$hiuZiFYq23em0e9eBqUl7Ow/87uYoDuuIklGzPA9IzPHF8MEMlmkS', 'user_id': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc'}
COMMIT
BEGIN (implicit)
SELECT "user".id, "user".username, "user".email, "user".pwd, "user".role, "user".first_access 
FROM "user" 
WHERE "user".id = %(pk_1)s
[generated in 0.00024s] {'pk_1': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc'}
ROLLBACK
172.22.0.1:43748 - "PATCH /user/pf HTTP/1.1" 200
172.22.0.1:43810 - "OPTIONS /wallet/pf/6b45a501-8297-4b61-b2d2-a37719bbcf89/docs HTTP/1.1" 200
BEGIN (implicit)
SELECT anon_1.person_document_id AS anon_1_person_document_id, anon_1.person_document_pf_id AS anon_1_person_document_pf_id, anon_1.person_document_upload_by AS anon_1_person_document_upload_by, anon_1.person_document_tipologia AS anon_1_person_document_tipologia, anon_1.person_document_entity AS anon_1_person_document_entity, anon_1.person_document_number AS anon_1_person_document_number, anon_1.person_document_place_of_issue AS anon_1_person_document_place_of_issue, anon_1.person_document_release_date AS anon_1_person_document_release_date, anon_1.person_document_upload_date AS anon_1_person_document_upload_date, anon_1.person_document_expiration_date AS anon_1_person_document_expiration_date, anon_1.person_document_path AS anon_1_person_document_path 
FROM (SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document, person 
WHERE person_document.pf_id = %(pf_id_1)s AND person.user_id = %(user_id_1)s) AS anon_1 JOIN person ON person.id = anon_1.person_document_pf_id
[generated in 0.00027s] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'user_id_1': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/document_repository.py", line 51, in get_documents_by_user_id
    raise UserNotFoundError(entity_id=user_id)
repositories.repository_exceptions.UserNotFoundError: User not found, id: 5bb8bf9c-59fc-4226-bf17-6799e1d009fc
ROLLBACK
172.22.0.1:43814 - "GET /wallet/pf/6b45a501-8297-4b61-b2d2-a37719bbcf89/docs HTTP/1.1" 500
172.22.0.1:43810 - "OPTIONS /permissions HTTP/1.1" 200
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM (SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report) AS anon_1 JOIN permission ON anon_1.person_report_id = permission.document_id 
WHERE anon_1.person_report_pf_id = %(pf_id_1)s AND permission.pending = true
[generated in 0.00041s] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/report_repository.py", line 135, in get_permissions_in_pending_by_pf_id
    raise PermissionNotFoundError(entity_id=None)
repositories.repository_exceptions.PermissionNotFoundError: Permission not found, id: None
ROLLBACK
172.22.0.1:43814 - "GET /permissions HTTP/1.1" 404
BEGIN (implicit)
SELECT anon_1.person_document_id AS anon_1_person_document_id, anon_1.person_document_pf_id AS anon_1_person_document_pf_id, anon_1.person_document_upload_by AS anon_1_person_document_upload_by, anon_1.person_document_tipologia AS anon_1_person_document_tipologia, anon_1.person_document_entity AS anon_1_person_document_entity, anon_1.person_document_number AS anon_1_person_document_number, anon_1.person_document_place_of_issue AS anon_1_person_document_place_of_issue, anon_1.person_document_release_date AS anon_1_person_document_release_date, anon_1.person_document_upload_date AS anon_1_person_document_upload_date, anon_1.person_document_expiration_date AS anon_1_person_document_expiration_date, anon_1.person_document_path AS anon_1_person_document_path 
FROM (SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document, person 
WHERE person_document.pf_id = %(pf_id_1)s AND person.user_id = %(user_id_1)s) AS anon_1 JOIN person ON person.id = anon_1.person_document_pf_id
[cached since 4.612s ago] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'user_id_1': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/document_repository.py", line 51, in get_documents_by_user_id
    raise UserNotFoundError(entity_id=user_id)
repositories.repository_exceptions.UserNotFoundError: User not found, id: 5bb8bf9c-59fc-4226-bf17-6799e1d009fc
ROLLBACK
172.22.0.1:43814 - "GET /wallet/pf/6b45a501-8297-4b61-b2d2-a37719bbcf89/docs HTTP/1.1" 500
172.22.0.1:43810 - "OPTIONS /reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[cached since 40.08s ago] {'user_id_1': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc', 'param_1': 1}
ROLLBACK
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 1474s ago] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/report_repository.py", line 40, in get_reports
    raise ReportNotFoundError(pf_id)
repositories.repository_exceptions.ReportNotFoundError: Report not found, id: 6b45a501-8297-4b61-b2d2-a37719bbcf89
ROLLBACK
172.22.0.1:43814 - "GET /reports HTTP/1.1" 404
172.22.0.1:43810 - "OPTIONS /pf/6b45a501-8297-4b61-b2d2-a37719bbcf89 HTTP/1.1" 200
BEGIN (implicit)
SELECT anon_1.person_id AS anon_1_person_id, anon_1.person_created_by AS anon_1_person_created_by, anon_1.person_owner_id AS anon_1_person_owner_id, anon_1.person_user_id AS anon_1_person_user_id, anon_1.person_is_dead AS anon_1_person_is_dead, anon_1.person_death_date AS anon_1_person_death_date, anon_1.person_cf AS anon_1_person_cf, anon_1.person_cui_code AS anon_1_person_cui_code, anon_1.person_firstname AS anon_1_person_firstname, anon_1.person_lastname AS anon_1_person_lastname, anon_1.person_fullname AS anon_1_person_fullname, anon_1.person_nicknames AS anon_1_person_nicknames, anon_1.person_gender AS anon_1_person_gender, anon_1.person_birth_date AS anon_1_person_birth_date, anon_1.person_verified AS anon_1_person_verified, anon_1.person_created AS anon_1_person_created, anon_1.person_updated AS anon_1_person_updated, anon_1.person_sanitary_district_id AS anon_1_person_sanitary_district_id, anon_1.person_is_anonymous AS anon_1_person_is_anonymous, anon_1.person_is_foreign AS anon_1_person_is_foreign, anon_1.person_birth_city AS anon_1_person_birth_city, anon_1.person_birth_geoarea_id AS anon_1_person_birth_geoarea_id, anon_1.person_birth_nation_id AS anon_1_person_birth_nation_id, person_address_1.id AS person_address_1_id, person_address_1.created_by AS person_address_1_created_by, person_address_1.owner_id AS person_address_1_owner_id, person_address_1.pf_id AS person_address_1_pf_id, person_address_1.address_type_id AS person_address_1_address_type_id, person_address_1.geoarea_id AS person_address_1_geoarea_id, person_address_1.address AS person_address_1_address, person_address_1.from_date AS person_address_1_from_date, person_address_1.created AS person_address_1_created, person_address_1.updated AS person_address_1_updated, person_citizenship_1.id AS person_citizenship_1_id, person_citizenship_1.created_by AS person_citizenship_1_created_by, person_citizenship_1.owner_id AS person_citizenship_1_owner_id, person_citizenship_1.pf_id AS person_citizenship_1_pf_id, person_citizenship_1.nation_id AS person_citizenship_1_nation_id, person_citizenship_1.from_date AS person_citizenship_1_from_date, person_citizenship_1.created AS person_citizenship_1_created, person_citizenship_1.updated AS person_citizenship_1_updated, person_marital_status_1.id AS person_marital_status_1_id, person_marital_status_1.created_by AS person_marital_status_1_created_by, person_marital_status_1.owner_id AS person_marital_status_1_owner_id, person_marital_status_1.pf_id AS person_marital_status_1_pf_id, person_marital_status_1.marital_status_code AS person_marital_status_1_marital_status_code, person_marital_status_1.from_date AS person_marital_status_1_from_date, person_marital_status_1.created AS person_marital_status_1_created, person_marital_status_1.updated AS person_marital_status_1_updated 
FROM (SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.id = %(id_1)s 
 LIMIT %(param_1)s) AS anon_1 LEFT OUTER JOIN person_address AS person_address_1 ON anon_1.person_id = person_address_1.pf_id LEFT OUTER JOIN person_citizenship AS person_citizenship_1 ON anon_1.person_id = person_citizenship_1.pf_id LEFT OUTER JOIN person_marital_status AS person_marital_status_1 ON anon_1.person_id = person_marital_status_1.pf_id
[cached since 80.45s ago] {'id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'param_1': 1}
ROLLBACK
172.22.0.1:43814 - "GET /pf/6b45a501-8297-4b61-b2d2-a37719bbcf89 HTTP/1.1" 200
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM (SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report) AS anon_1 JOIN permission ON anon_1.person_report_id = permission.document_id 
WHERE anon_1.person_report_pf_id = %(pf_id_1)s AND permission.pending = true
[cached since 7.578s ago] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/report_repository.py", line 135, in get_permissions_in_pending_by_pf_id
    raise PermissionNotFoundError(entity_id=None)
repositories.repository_exceptions.PermissionNotFoundError: Permission not found, id: None
ROLLBACK
172.22.0.1:43814 - "GET /permissions HTTP/1.1" 404
192.168.1.228:60148 - "POST /auth/ HTTP/1.1" 307
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 120.3s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
192.168.1.228:60148 - "POST /auth HTTP/1.1" 200
Calling on_part_begin with no data
Calling on_header_field with data[44:63]
Calling on_header_value with data[65:141]
Calling on_header_end with no data
Calling on_header_field with data[143:157]
Calling on_header_value with data[159:166]
Calling on_header_end with no data
Calling on_header_field with data[168:180]
Calling on_header_value with data[182:197]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[201:2920]
Calling on_part_data with data[0:27716]
Calling on_part_data with data[0:86880]
Calling on_part_data with data[0:74388]
Calling on_part_data with data[0:7300]
Calling on_part_data with data[0:35040]
Calling on_part_data with data[0:58400]
Calling on_part_data with data[0:91980]
Calling on_part_data with data[0:2556]
Calling on_part_data with data[0:1]
Calling on_part_data with data[2557:31509]
Calling on_part_data with data[0:1]
Calling on_part_data with data[31510:126230]
Calling on_part_data with data[0:1]
Calling on_part_data with data[126231:143080]
Calling on_part_data with data[0:262144]
Calling on_part_data with data[0:262144]
Calling on_part_data with data[0:44575]
Calling on_part_data with data[0:1]
Calling on_part_data with data[44576:262144]
Calling on_part_data with data[0:262144]
Calling on_part_data with data[0:13802]
Calling on_part_data with data[0:1]
Calling on_part_data with data[13803:190632]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[190678:190697]
Calling on_header_value with data[190699:190726]
Calling on_header_end with no data
Calling on_header_field with data[190728:190742]
Calling on_header_value with data[190744:190745]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[190749:190758]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[190804:190823]
Calling on_header_value with data[190825:190849]
Calling on_header_end with no data
Calling on_header_field with data[190851:190865]
Calling on_header_value with data[190867:190868]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[190872:190881]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[190927:190946]
Calling on_header_value with data[190948:190978]
Calling on_header_end with no data
Calling on_header_field with data[190980:190994]
Calling on_header_value with data[190996:190998]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[191002:191021]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[191067:191086]
Calling on_header_value with data[191088:191121]
Calling on_header_end with no data
Calling on_header_field with data[191123:191137]
Calling on_header_value with data[191139:191141]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[191145:191164]
Calling on_part_end with no data
Calling on_end with no data
BEGIN (implicit)
INSERT INTO person_document (id, pf_id, upload_by, tipologia, entity, number, place_of_issue, release_date, upload_date, expiration_date, path) VALUES (%(id)s, %(pf_id)s, %(upload_by)s, %(tipologia)s, %(entity)s, %(number)s, %(place_of_issue)s, %(release_date)s, %(upload_date)s, %(expiration_date)s, %(path)s)
[generated in 0.00027s] {'id': '054dcf1d-61de-471e-91d5-cb79d7c4df69', 'pf_id': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'upload_by': '498be88a-188b-41c9-90e5-9e5fdbefdba2', 'tipologia': 'documento', 'entity': 'ANThology', 'number': None, 'place_of_issue': None, 'release_date': '2022-05-09 11:58:58', 'upload_date': datetime.date(2022, 5, 9), 'expiration_date': '2022-05-09 11:58:58', 'path': '../../documents/054dcf1d-61de-471e-91d5-cb79d7c4df69.pdf'}
COMMIT
BEGIN (implicit)
SELECT person_document.id, person_document.pf_id, person_document.upload_by, person_document.tipologia, person_document.entity, person_document.number, person_document.place_of_issue, person_document.release_date, person_document.upload_date, person_document.expiration_date, person_document.path 
FROM person_document 
WHERE person_document.id = %(pk_1)s
[generated in 0.00034s] {'pk_1': '054dcf1d-61de-471e-91d5-cb79d7c4df69'}
ROLLBACK
192.168.1.228:60158 - "POST /wallet/pf/6b45a501-8297-4b61-b2d2-a37719bbcf89/docs/upload HTTP/1.1" 200
BEGIN (implicit)
SELECT anon_1.person_document_id AS anon_1_person_document_id, anon_1.person_document_pf_id AS anon_1_person_document_pf_id, anon_1.person_document_upload_by AS anon_1_person_document_upload_by, anon_1.person_document_tipologia AS anon_1_person_document_tipologia, anon_1.person_document_entity AS anon_1_person_document_entity, anon_1.person_document_number AS anon_1_person_document_number, anon_1.person_document_place_of_issue AS anon_1_person_document_place_of_issue, anon_1.person_document_release_date AS anon_1_person_document_release_date, anon_1.person_document_upload_date AS anon_1_person_document_upload_date, anon_1.person_document_expiration_date AS anon_1_person_document_expiration_date, anon_1.person_document_path AS anon_1_person_document_path 
FROM (SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document, person 
WHERE person_document.pf_id = %(pf_id_1)s AND person.user_id = %(user_id_1)s) AS anon_1 JOIN person ON person.id = anon_1.person_document_pf_id
[cached since 37.3s ago] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'user_id_1': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc'}
ROLLBACK
172.22.0.1:44174 - "GET /wallet/pf/6b45a501-8297-4b61-b2d2-a37719bbcf89/docs HTTP/1.1" 200
172.22.0.1:44344 - "OPTIONS /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[generated in 0.00032s] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:44348 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:44390 - "OPTIONS /reports/upload HTTP/1.1" 200
Calling on_part_begin with no data
Calling on_header_field with data[42:61]
Calling on_header_value with data[63:86]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[90:126]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[170:189]
Calling on_header_value with data[191:214]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[218:232]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[276:295]
Calling on_header_value with data[297:373]
Calling on_header_end with no data
Calling on_header_field with data[375:387]
Calling on_header_value with data[389:404]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[408:81920]
Calling on_part_data with data[0:94849]
Calling on_part_data with data[0:1]
Calling on_part_data with data[94850:262144]
Calling on_part_data with data[0:173667]
Calling on_part_data with data[0:1]
Calling on_part_data with data[173668:262144]
Calling on_part_data with data[0:149465]
Calling on_part_data with data[0:1]
Calling on_part_data with data[149466:262144]
Calling on_part_data with data[0:58701]
Calling on_part_data with data[0:1]
Calling on_part_data with data[58702:262144]
Calling on_part_data with data[0:119838]
Calling on_part_data with data[0:1]
Calling on_part_data with data[119839:131375]
Calling on_part_data with data[0:1]
Calling on_part_data with data[131376:162834]
Calling on_part_data with data[0:1]
Calling on_part_data with data[162835:262144]
Calling on_part_data with data[0:58360]
Calling on_part_data with data[0:1]
Calling on_part_data with data[58361:169297]
Calling on_part_data with data[0:1]
Calling on_part_data with data[169298:262144]
Calling on_part_data with data[0:112335]
Calling on_part_end with no data
Calling on_end with no data
BEGIN (implicit)
INSERT INTO person_report (id, pf_id, title, upload_date, path, upload_by) VALUES (%(id)s, %(pf_id)s, %(title)s, %(upload_date)s, %(path)s, %(upload_by)s)
[generated in 0.00024s] {'id': 'fbacf7d2-a140-42c2-b0bf-46e27e89031d', 'pf_id': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'title': 'referto medico', 'upload_date': datetime.date(2022, 5, 9), 'path': '../../reports/fbacf7d2-a140-42c2-b0bf-46e27e89031d.pdf', 'upload_by': '8e9f97ec-7030-4c13-933c-7e3e1ad97628'}
COMMIT
BEGIN (implicit)
SELECT person_report.id, person_report.pf_id, person_report.title, person_report.upload_date, person_report.path, person_report.upload_by 
FROM person_report 
WHERE person_report.id = %(pk_1)s
[generated in 0.00023s] {'pk_1': 'fbacf7d2-a140-42c2-b0bf-46e27e89031d'}
ROLLBACK
172.22.0.1:44394 - "POST /reports/upload HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 19.8s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:44394 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:44402 - "OPTIONS /reports/pf/6b45a501-8297-4b61-b2d2-a37719bbcf89 HTTP/1.1" 200
172.22.0.1:44402 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 1549s ago] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89'}
ROLLBACK
172.22.0.1:44394 - "GET /reports/pf/6b45a501-8297-4b61-b2d2-a37719bbcf89 HTTP/1.1" 200
172.22.0.1:44410 - "GET /session/reports HTTP/1.1" 404
172.22.0.1:44406 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[cached since 1524s ago] {'id_1_1': 'fbacf7d2-a140-42c2-b0bf-46e27e89031d'}
ROLLBACK
172.22.0.1:44418 - "POST /session/reports HTTP/1.1" 200
172.22.0.1:44426 - "GET /session/reports HTTP/1.1" 200
172.22.0.1:44426 - "GET /session/reports HTTP/1.1" 200
172.22.0.1:44430 - "OPTIONS /permissions HTTP/1.1" 200
172.22.0.1:44426 - "GET /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM permission 
WHERE permission.user_id = %(user_id_1)s AND permission.document_id IN (%(document_id_1_1)s)
[cached since 1504s ago] {'user_id_1': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'document_id_1_1': 'fbacf7d2-a140-42c2-b0bf-46e27e89031d'}
ROLLBACK
BEGIN (implicit)
INSERT INTO permission (user_id, document_id, permission, created, pending) VALUES (%(user_id)s, %(document_id)s, %(permission)s, %(created)s, %(pending)s)
[cached since 1504s ago] {'user_id': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'document_id': 'fbacf7d2-a140-42c2-b0bf-46e27e89031d', 'permission': False, 'created': datetime.date(2022, 5, 9), 'pending': True}
COMMIT
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM permission 
WHERE permission.user_id = %(user_id_1)s AND permission.document_id IN (NULL) AND (1 != 1)
[cached since 1504s ago] {'user_id_1': '8e9f97ec-7030-4c13-933c-7e3e1ad97628'}
ROLLBACK
172.22.0.1:44434 - "POST /permissions HTTP/1.1" 200
172.22.0.1:44426 - "DELETE /session/reports HTTP/1.1" 200
172.22.0.1:44426 - "GET /session/reports HTTP/1.1" 404
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM (SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report) AS anon_1 JOIN permission ON anon_1.person_report_id = permission.document_id 
WHERE anon_1.person_report_pf_id = %(pf_id_1)s AND permission.pending = true
[cached since 99.95s ago] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89'}
ROLLBACK
172.22.0.1:44440 - "GET /permissions HTTP/1.1" 200
172.22.0.1:44448 - "OPTIONS /permissions HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[cached since 138.7s ago] {'user_id_1': '5bb8bf9c-59fc-4226-bf17-6799e1d009fc', 'param_1': 1}
ROLLBACK
BEGIN (implicit)
SELECT anon_1.permission_user_id AS anon_1_permission_user_id, anon_1.permission_document_id AS anon_1_permission_document_id, anon_1.permission_permission AS anon_1_permission_permission, anon_1.permission_created AS anon_1_permission_created, anon_1.permission_pending AS anon_1_permission_pending 
FROM (SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM permission) AS anon_1 JOIN person_report ON person_report.id = anon_1.permission_document_id 
WHERE person_report.pf_id = %(pf_id_1)s AND anon_1.permission_pending = true AND (anon_1.permission_user_id, anon_1.permission_document_id) IN ((%(param_1_1_1)s, %(param_1_1_2)s))
[generated in 0.00052s] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89', 'param_1_1_1': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'param_1_1_2': 'fbacf7d2-a140-42c2-b0bf-46e27e89031d'}
UPDATE permission SET permission=%(permission)s, pending=%(pending)s WHERE permission.user_id = %(permission_user_id)s AND permission.document_id = %(permission_document_id)s
[generated in 0.00029s] {'permission': True, 'pending': False, 'permission_user_id': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'permission_document_id': 'fbacf7d2-a140-42c2-b0bf-46e27e89031d'}
COMMIT
172.22.0.1:44440 - "PATCH /permissions HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 53.2s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:44458 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 1581s ago] {'pf_id_1': '6b45a501-8297-4b61-b2d2-a37719bbcf89'}
ROLLBACK
172.22.0.1:44458 - "GET /reports/pf/6b45a501-8297-4b61-b2d2-a37719bbcf89 HTTP/1.1" 200
172.22.0.1:44462 - "GET /session/reports HTTP/1.1" 404
172.22.0.1:44468 - "OPTIONS /reports/fbacf7d2-a140-42c2-b0bf-46e27e89031d HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM (SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM permission 
WHERE permission.user_id = %(user_id_1)s AND permission.document_id = %(document_id_1)s AND permission.permission) AS anon_1 JOIN person_report ON person_report.id = anon_1.permission_document_id 
 LIMIT %(param_1)s
[generated in 0.00079s] {'user_id_1': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'document_id_1': 'fbacf7d2-a140-42c2-b0bf-46e27e89031d', 'param_1': 1}
ROLLBACK
172.22.0.1:44462 - "GET /reports/fbacf7d2-a140-42c2-b0bf-46e27e89031d HTTP/1.1" 200
172.22.0.1:45834 - "GET /docs HTTP/1.1" 200
172.22.0.1:45834 - "GET /openapi.json HTTP/1.1" 200
192.168.1.228:34632 - "POST /auth/ HTTP/1.1" 307
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 1599s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
192.168.1.228:34632 - "POST /auth HTTP/1.1" 200
192.168.1.228:34634 - "POST /pf/ HTTP/1.1" 307
BEGIN (implicit)
INSERT INTO "user" (id, username, email, pwd, role, first_access) VALUES (%(id)s, %(username)s, %(email)s, %(pwd)s, %(role)s, %(first_access)s)
[cached since 1599s ago] {'id': 'a192bdab-4008-45fc-bd71-7e7d6fbb8201', 'username': 'Sal.Meradi663', 'email': None, 'pwd': '$2b$12$ZKdaJ0ljNVI8Q7f1XV.fxeqKlhtNi2XT7JouR.jdOzluWLoLtF3Oy', 'role': 'PF', 'first_access': True}
INSERT INTO person (id, created_by, owner_id, user_id, is_dead, death_date, cf, cui_code, firstname, lastname, fullname, nicknames, gender, birth_date, verified, created, updated, sanitary_district_id, is_anonymous, is_foreign, birth_city, birth_geoarea_id, birth_nation_id) VALUES (%(id)s, %(created_by)s, %(owner_id)s, %(user_id)s, %(is_dead)s, %(death_date)s, %(cf)s, %(cui_code)s, %(firstname)s, %(lastname)s, %(fullname)s, %(nicknames)s, %(gender)s, %(birth_date)s, %(verified)s, %(created)s, %(updated)s, %(sanitary_district_id)s, %(is_anonymous)s, %(is_foreign)s, %(birth_city)s, %(birth_geoarea_id)s, %(birth_nation_id)s)
[cached since 1599s ago] {'id': 'dde143d6-1dc9-4a20-ac28-0faeec888406', 'created_by': '498be88a-188b-41c9-90e5-9e5fdbefdba2', 'owner_id': '498be88a-188b-41c9-90e5-9e5fdbefdba2', 'user_id': 'a192bdab-4008-45fc-bd71-7e7d6fbb8201', 'is_dead': False, 'death_date': None, 'cf': None, 'cui_code': '', 'firstname': 'Salih', 'lastname': 'Meradi', 'fullname': 'Salih Meradi', 'nicknames': None, 'gender': 'M', 'birth_date': datetime.date(1968, 3, 8), 'verified': False, 'created': datetime.date(2022, 5, 9), 'updated': datetime.date(2022, 5, 9), 'sanitary_district_id': None, 'is_anonymous': False, 'is_foreign': False, 'birth_city': None, 'birth_geoarea_id': None, 'birth_nation_id': 'DZA'}
COMMIT
BEGIN (implicit)
SELECT person.id, person.created_by, person.owner_id, person.user_id, person.is_dead, person.death_date, person.cf, person.cui_code, person.firstname, person.lastname, person.fullname, person.nicknames, person.gender, person.birth_date, person.verified, person.created, person.updated, person.sanitary_district_id, person.is_anonymous, person.is_foreign, person.birth_city, person.birth_geoarea_id, person.birth_nation_id 
FROM person 
WHERE person.id = %(pk_1)s
[cached since 1599s ago] {'pk_1': 'dde143d6-1dc9-4a20-ac28-0faeec888406'}
ROLLBACK
192.168.1.228:34634 - "POST /pf HTTP/1.1" 201
192.168.1.228:34702 - "POST /auth/ HTTP/1.1" 307
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 1626s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
192.168.1.228:34702 - "POST /auth HTTP/1.1" 200
192.168.1.228:34704 - "POST /pf/ HTTP/1.1" 307
BEGIN (implicit)
INSERT INTO "user" (id, username, email, pwd, role, first_access) VALUES (%(id)s, %(username)s, %(email)s, %(pwd)s, %(role)s, %(first_access)s)
[cached since 1626s ago] {'id': '45d3b336-9ba5-4674-b9e5-c092614992c1', 'username': 'Fab.Meini746', 'email': None, 'pwd': '$2b$12$j9Ii4J1FaMr2vaxwuOrD/uCSH.6R57Mx/7uPx66r9lnqp8wgVSd9C', 'role': 'PF', 'first_access': True}
INSERT INTO person (id, created_by, owner_id, user_id, is_dead, death_date, cf, cui_code, firstname, lastname, fullname, nicknames, gender, birth_date, verified, created, updated, sanitary_district_id, is_anonymous, is_foreign, birth_city, birth_geoarea_id, birth_nation_id) VALUES (%(id)s, %(created_by)s, %(owner_id)s, %(user_id)s, %(is_dead)s, %(death_date)s, %(cf)s, %(cui_code)s, %(firstname)s, %(lastname)s, %(fullname)s, %(nicknames)s, %(gender)s, %(birth_date)s, %(verified)s, %(created)s, %(updated)s, %(sanitary_district_id)s, %(is_anonymous)s, %(is_foreign)s, %(birth_city)s, %(birth_geoarea_id)s, %(birth_nation_id)s)
[cached since 1626s ago] {'id': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c', 'created_by': '498be88a-188b-41c9-90e5-9e5fdbefdba2', 'owner_id': '498be88a-188b-41c9-90e5-9e5fdbefdba2', 'user_id': '45d3b336-9ba5-4674-b9e5-c092614992c1', 'is_dead': False, 'death_date': None, 'cf': None, 'cui_code': '', 'firstname': 'Fabrizio', 'lastname': 'Meini', 'fullname': 'Fabrizio Meini', 'nicknames': None, 'gender': 'M', 'birth_date': datetime.date(1998, 12, 15), 'verified': False, 'created': datetime.date(2022, 5, 9), 'updated': datetime.date(2022, 5, 9), 'sanitary_district_id': None, 'is_anonymous': False, 'is_foreign': False, 'birth_city': None, 'birth_geoarea_id': None, 'birth_nation_id': 'ITA'}
COMMIT
BEGIN (implicit)
SELECT person.id, person.created_by, person.owner_id, person.user_id, person.is_dead, person.death_date, person.cf, person.cui_code, person.firstname, person.lastname, person.fullname, person.nicknames, person.gender, person.birth_date, person.verified, person.created, person.updated, person.sanitary_district_id, person.is_anonymous, person.is_foreign, person.birth_city, person.birth_geoarea_id, person.birth_nation_id 
FROM person 
WHERE person.id = %(pk_1)s
[cached since 1626s ago] {'pk_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c'}
ROLLBACK
192.168.1.228:34704 - "POST /pf HTTP/1.1" 201
192.168.1.228:34718 - "POST /auth/ HTTP/1.1" 307
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 1634s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
192.168.1.228:34718 - "POST /auth HTTP/1.1" 200
192.168.1.228:34720 - "GET /pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c/ HTTP/1.1" 307
BEGIN (implicit)
SELECT anon_1.person_id AS anon_1_person_id, anon_1.person_created_by AS anon_1_person_created_by, anon_1.person_owner_id AS anon_1_person_owner_id, anon_1.person_user_id AS anon_1_person_user_id, anon_1.person_is_dead AS anon_1_person_is_dead, anon_1.person_death_date AS anon_1_person_death_date, anon_1.person_cf AS anon_1_person_cf, anon_1.person_cui_code AS anon_1_person_cui_code, anon_1.person_firstname AS anon_1_person_firstname, anon_1.person_lastname AS anon_1_person_lastname, anon_1.person_fullname AS anon_1_person_fullname, anon_1.person_nicknames AS anon_1_person_nicknames, anon_1.person_gender AS anon_1_person_gender, anon_1.person_birth_date AS anon_1_person_birth_date, anon_1.person_verified AS anon_1_person_verified, anon_1.person_created AS anon_1_person_created, anon_1.person_updated AS anon_1_person_updated, anon_1.person_sanitary_district_id AS anon_1_person_sanitary_district_id, anon_1.person_is_anonymous AS anon_1_person_is_anonymous, anon_1.person_is_foreign AS anon_1_person_is_foreign, anon_1.person_birth_city AS anon_1_person_birth_city, anon_1.person_birth_geoarea_id AS anon_1_person_birth_geoarea_id, anon_1.person_birth_nation_id AS anon_1_person_birth_nation_id, person_address_1.id AS person_address_1_id, person_address_1.created_by AS person_address_1_created_by, person_address_1.owner_id AS person_address_1_owner_id, person_address_1.pf_id AS person_address_1_pf_id, person_address_1.address_type_id AS person_address_1_address_type_id, person_address_1.geoarea_id AS person_address_1_geoarea_id, person_address_1.address AS person_address_1_address, person_address_1.from_date AS person_address_1_from_date, person_address_1.created AS person_address_1_created, person_address_1.updated AS person_address_1_updated, person_citizenship_1.id AS person_citizenship_1_id, person_citizenship_1.created_by AS person_citizenship_1_created_by, person_citizenship_1.owner_id AS person_citizenship_1_owner_id, person_citizenship_1.pf_id AS person_citizenship_1_pf_id, person_citizenship_1.nation_id AS person_citizenship_1_nation_id, person_citizenship_1.from_date AS person_citizenship_1_from_date, person_citizenship_1.created AS person_citizenship_1_created, person_citizenship_1.updated AS person_citizenship_1_updated, person_marital_status_1.id AS person_marital_status_1_id, person_marital_status_1.created_by AS person_marital_status_1_created_by, person_marital_status_1.owner_id AS person_marital_status_1_owner_id, person_marital_status_1.pf_id AS person_marital_status_1_pf_id, person_marital_status_1.marital_status_code AS person_marital_status_1_marital_status_code, person_marital_status_1.from_date AS person_marital_status_1_from_date, person_marital_status_1.created AS person_marital_status_1_created, person_marital_status_1.updated AS person_marital_status_1_updated 
FROM (SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.id = %(id_1)s 
 LIMIT %(param_1)s) AS anon_1 LEFT OUTER JOIN person_address AS person_address_1 ON anon_1.person_id = person_address_1.pf_id LEFT OUTER JOIN person_citizenship AS person_citizenship_1 ON anon_1.person_id = person_citizenship_1.pf_id LEFT OUTER JOIN person_marital_status AS person_marital_status_1 ON anon_1.person_id = person_marital_status_1.pf_id
[cached since 1616s ago] {'id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c', 'param_1': 1}
ROLLBACK
192.168.1.228:34720 - "GET /pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c HTTP/1.1" 200
192.168.1.228:34722 - "POST /auth/ HTTP/1.1" 307
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 1635s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
192.168.1.228:34722 - "POST /auth HTTP/1.1" 200
192.168.1.228:34724 - "PATCH /pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c/ HTTP/1.1" 307
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.id = %(id_1)s 
 LIMIT %(param_1)s
[cached since 1616s ago] {'id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c', 'param_1': 1}
COMMIT
BEGIN (implicit)
SELECT person.id, person.created_by, person.owner_id, person.user_id, person.is_dead, person.death_date, person.cf, person.cui_code, person.firstname, person.lastname, person.fullname, person.nicknames, person.gender, person.birth_date, person.verified, person.created, person.updated, person.sanitary_district_id, person.is_anonymous, person.is_foreign, person.birth_city, person.birth_geoarea_id, person.birth_nation_id 
FROM person 
WHERE person.id = %(pk_1)s
[cached since 1634s ago] {'pk_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c'}
ROLLBACK
192.168.1.228:34724 - "PATCH /pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c HTTP/1.1" 200
172.22.0.1:46906 - "OPTIONS /auth HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 1666s ago] {'username_1': 'Fab.Meini746', 'param_1': 1}
ROLLBACK
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".id = %(id_1)s 
 LIMIT %(param_1)s
[cached since 1608s ago] {'id_1': '45d3b336-9ba5-4674-b9e5-c092614992c1', 'param_1': 1}
UPDATE "user" SET first_access=%(first_access)s WHERE "user".id = %(user_id)s
[cached since 1608s ago] {'first_access': False, 'user_id': '45d3b336-9ba5-4674-b9e5-c092614992c1'}
COMMIT
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[cached since 1608s ago] {'user_id_1': '45d3b336-9ba5-4674-b9e5-c092614992c1', 'param_1': 1}
ROLLBACK
172.22.0.1:46906 - "POST /auth HTTP/1.1" 200
172.22.0.1:46948 - "OPTIONS /user/pf HTTP/1.1" 200
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM (SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.id = %(id_1)s) AS anon_1 JOIN "user" ON "user".id = anon_1.person_user_id 
 LIMIT %(param_1)s
[cached since 1607s ago] {'id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c', 'param_1': 1}
UPDATE "user" SET pwd=%(pwd)s WHERE "user".id = %(user_id)s
[cached since 1593s ago] {'pwd': '$2b$12$RaAscM5tT1h792m/Swg75eXghcf8nlaZ017br6aRLyolq/VyiQgmG', 'user_id': '45d3b336-9ba5-4674-b9e5-c092614992c1'}
COMMIT
BEGIN (implicit)
SELECT "user".id, "user".username, "user".email, "user".pwd, "user".role, "user".first_access 
FROM "user" 
WHERE "user".id = %(pk_1)s
[cached since 1593s ago] {'pk_1': '45d3b336-9ba5-4674-b9e5-c092614992c1'}
ROLLBACK
172.22.0.1:46952 - "PATCH /user/pf HTTP/1.1" 200
172.22.0.1:46948 - "OPTIONS /wallet/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c/docs HTTP/1.1" 200
BEGIN (implicit)
SELECT anon_1.person_document_id AS anon_1_person_document_id, anon_1.person_document_pf_id AS anon_1_person_document_pf_id, anon_1.person_document_upload_by AS anon_1_person_document_upload_by, anon_1.person_document_tipologia AS anon_1_person_document_tipologia, anon_1.person_document_entity AS anon_1_person_document_entity, anon_1.person_document_number AS anon_1_person_document_number, anon_1.person_document_place_of_issue AS anon_1_person_document_place_of_issue, anon_1.person_document_release_date AS anon_1_person_document_release_date, anon_1.person_document_upload_date AS anon_1_person_document_upload_date, anon_1.person_document_expiration_date AS anon_1_person_document_expiration_date, anon_1.person_document_path AS anon_1_person_document_path 
FROM (SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document, person 
WHERE person_document.pf_id = %(pf_id_1)s AND person.user_id = %(user_id_1)s) AS anon_1 JOIN person ON person.id = anon_1.person_document_pf_id
[cached since 1590s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c', 'user_id_1': '45d3b336-9ba5-4674-b9e5-c092614992c1'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/document_repository.py", line 51, in get_documents_by_user_id
    raise UserNotFoundError(entity_id=user_id)
repositories.repository_exceptions.UserNotFoundError: User not found, id: 45d3b336-9ba5-4674-b9e5-c092614992c1
ROLLBACK
172.22.0.1:46952 - "GET /wallet/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c/docs HTTP/1.1" 500
192.168.1.228:34852 - "POST /auth/ HTTP/1.1" 307
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 1728s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
192.168.1.228:34852 - "POST /auth HTTP/1.1" 200
Calling on_part_begin with no data
Calling on_header_field with data[44:63]
Calling on_header_value with data[65:141]
Calling on_header_end with no data
Calling on_header_field with data[143:157]
Calling on_header_value with data[159:166]
Calling on_header_end with no data
Calling on_header_field with data[168:180]
Calling on_header_value with data[182:197]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[201:1460]
Calling on_part_data with data[0:27116]
Calling on_part_data with data[0:1]
Calling on_part_data with data[27117:27716]
Calling on_part_data with data[0:86880]
Calling on_part_data with data[0:12113]
Calling on_part_data with data[0:1]
Calling on_part_data with data[12114:74388]
Calling on_part_data with data[0:1460]
Calling on_part_data with data[0:16876]
Calling on_part_data with data[0:26280]
Calling on_part_data with data[0:35040]
Calling on_part_data with data[0:49640]
Calling on_part_data with data[0:73000]
Calling on_part_data with data[0:23393]
Calling on_part_data with data[0:1]
Calling on_part_data with data[23394:128315]
Calling on_part_data with data[0:167900]
Calling on_part_data with data[0:71813]
Calling on_part_data with data[0:1]
Calling on_part_data with data[71814:162225]
Calling on_part_data with data[0:166440]
Calling on_part_data with data[0:148517]
Calling on_part_data with data[0:1]
Calling on_part_data with data[148518:154760]
Calling on_part_data with data[0:262144]
Calling on_part_data with data[0:182915]
Calling on_part_data with data[0:1]
Calling on_part_data with data[182916:262144]
Calling on_part_data with data[0:21400]
Calling on_part_data with data[0:1]
Calling on_part_data with data[21401:70244]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[70290:70309]
Calling on_header_value with data[70311:70338]
Calling on_header_end with no data
Calling on_header_field with data[70340:70354]
Calling on_header_value with data[70356:70357]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[70361:70370]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[70416:70435]
Calling on_header_value with data[70437:70461]
Calling on_header_end with no data
Calling on_header_field with data[70463:70477]
Calling on_header_value with data[70479:70480]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[70484:70493]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[70539:70558]
Calling on_header_value with data[70560:70590]
Calling on_header_end with no data
Calling on_header_field with data[70592:70606]
Calling on_header_value with data[70608:70610]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[70614:70633]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[70679:70698]
Calling on_header_value with data[70700:70733]
Calling on_header_end with no data
Calling on_header_field with data[70735:70749]
Calling on_header_value with data[70751:70753]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[70757:70776]
Calling on_part_end with no data
Calling on_end with no data
BEGIN (implicit)
INSERT INTO person_document (id, pf_id, upload_by, tipologia, entity, number, place_of_issue, release_date, upload_date, expiration_date, path) VALUES (%(id)s, %(pf_id)s, %(upload_by)s, %(tipologia)s, %(entity)s, %(number)s, %(place_of_issue)s, %(release_date)s, %(upload_date)s, %(expiration_date)s, %(path)s)
[cached since 1608s ago] {'id': '30d15f42-6640-4181-8612-a5df68e44a82', 'pf_id': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c', 'upload_by': '498be88a-188b-41c9-90e5-9e5fdbefdba2', 'tipologia': 'documento', 'entity': 'ANThology', 'number': None, 'place_of_issue': None, 'release_date': '2022-05-09 12:25:47', 'upload_date': datetime.date(2022, 5, 9), 'expiration_date': '2022-05-09 12:25:47', 'path': '../../documents/30d15f42-6640-4181-8612-a5df68e44a82.pdf'}
COMMIT
BEGIN (implicit)
SELECT person_document.id, person_document.pf_id, person_document.upload_by, person_document.tipologia, person_document.entity, person_document.number, person_document.place_of_issue, person_document.release_date, person_document.upload_date, person_document.expiration_date, person_document.path 
FROM person_document 
WHERE person_document.id = %(pk_1)s
[cached since 1608s ago] {'pk_1': '30d15f42-6640-4181-8612-a5df68e44a82'}
ROLLBACK
192.168.1.228:34854 - "POST /wallet/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c/docs/upload HTTP/1.1" 200
BEGIN (implicit)
SELECT anon_1.person_document_id AS anon_1_person_document_id, anon_1.person_document_pf_id AS anon_1_person_document_pf_id, anon_1.person_document_upload_by AS anon_1_person_document_upload_by, anon_1.person_document_tipologia AS anon_1_person_document_tipologia, anon_1.person_document_entity AS anon_1_person_document_entity, anon_1.person_document_number AS anon_1_person_document_number, anon_1.person_document_place_of_issue AS anon_1_person_document_place_of_issue, anon_1.person_document_release_date AS anon_1_person_document_release_date, anon_1.person_document_upload_date AS anon_1_person_document_upload_date, anon_1.person_document_expiration_date AS anon_1_person_document_expiration_date, anon_1.person_document_path AS anon_1_person_document_path 
FROM (SELECT person_document.id AS person_document_id, person_document.pf_id AS person_document_pf_id, person_document.upload_by AS person_document_upload_by, person_document.tipologia AS person_document_tipologia, person_document.entity AS person_document_entity, person_document.number AS person_document_number, person_document.place_of_issue AS person_document_place_of_issue, person_document.release_date AS person_document_release_date, person_document.upload_date AS person_document_upload_date, person_document.expiration_date AS person_document_expiration_date, person_document.path AS person_document_path 
FROM person_document, person 
WHERE person_document.pf_id = %(pf_id_1)s AND person.user_id = %(user_id_1)s) AS anon_1 JOIN person ON person.id = anon_1.person_document_pf_id
[cached since 1665s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c', 'user_id_1': '45d3b336-9ba5-4674-b9e5-c092614992c1'}
ROLLBACK
172.22.0.1:47184 - "GET /wallet/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c/docs HTTP/1.1" 200
172.22.0.1:47200 - "OPTIONS /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 1623s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:47204 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 1627s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:47204 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:47254 - "OPTIONS /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c HTTP/1.1" 200
172.22.0.1:47258 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 3169s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/report_repository.py", line 40, in get_reports
    raise ReportNotFoundError(pf_id)
repositories.repository_exceptions.ReportNotFoundError: Report not found, id: 3c8cc747-a8d8-4d7f-a82f-4584b747c26c
ROLLBACK
172.22.0.1:47262 - "GET /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c HTTP/1.1" 404
172.22.0.1:47266 - "GET /session/reports HTTP/1.1" 404
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 1646s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:47266 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:47284 - "OPTIONS /reports/upload HTTP/1.1" 200
Calling on_part_begin with no data
Calling on_header_field with data[42:61]
Calling on_header_value with data[63:86]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[90:126]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[170:189]
Calling on_header_value with data[191:214]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[218:230]
Calling on_part_end with no data
Calling on_part_begin with no data
Calling on_header_field with data[274:293]
Calling on_header_value with data[295:371]
Calling on_header_end with no data
Calling on_header_field with data[373:385]
Calling on_header_value with data[387:402]
Calling on_header_end with no data
Calling on_headers_finished with no data
Calling on_part_data with data[406:89088]
Calling on_part_data with data[0:29784]
Calling on_part_data with data[0:1]
Calling on_part_data with data[29785:39983]
Calling on_part_data with data[0:1]
Calling on_part_data with data[39984:40278]
Calling on_part_data with data[0:1]
Calling on_part_data with data[40279:63712]
Calling on_part_data with data[0:239376]
Calling on_part_data with data[0:1]
Calling on_part_data with data[239377:242366]
Calling on_part_data with data[0:1]
Calling on_part_data with data[242367:262144]
Calling on_part_data with data[0:52228]
Calling on_part_data with data[0:1]
Calling on_part_data with data[52229:61789]
Calling on_part_data with data[0:1]
Calling on_part_data with data[61790:135049]
Calling on_part_data with data[0:1]
Calling on_part_data with data[135050:165896]
Calling on_part_data with data[0:1]
Calling on_part_data with data[165897:238218]
Calling on_part_data with data[0:1]
Calling on_part_data with data[238219:262144]
Calling on_part_data with data[0:78583]
Calling on_part_data with data[0:1]
Calling on_part_data with data[78584:200879]
Calling on_part_data with data[0:1]
Calling on_part_data with data[200880:262144]
Calling on_part_data with data[0:51000]
Calling on_part_data with data[0:1]
Calling on_part_data with data[51001:249267]
Calling on_part_data with data[0:1]
Calling on_part_data with data[249268:262144]
Calling on_part_data with data[0:66790]
Calling on_part_data with data[0:1]
Calling on_part_data with data[66791:83684]
Calling on_part_data with data[0:1]
Calling on_part_data with data[83685:135775]
Calling on_part_data with data[0:1]
Calling on_part_data with data[135776:179668]
Calling on_part_data with data[0:1]
Calling on_part_data with data[179669:200223]
Calling on_part_data with data[0:1]
Calling on_part_data with data[200224:262144]
Calling on_part_data with data[0:61868]
Calling on_part_data with data[0:1]
Calling on_part_data with data[61869:262144]
Calling on_part_data with data[0:41453]
Calling on_part_end with no data
Calling on_end with no data
BEGIN (implicit)
INSERT INTO person_report (id, pf_id, title, upload_date, path, upload_by) VALUES (%(id)s, %(pf_id)s, %(title)s, %(upload_date)s, %(path)s, %(upload_by)s)
[cached since 1646s ago] {'id': '38fb4daa-7a5a-4cef-9fe8-8acb7014cad9', 'pf_id': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c', 'title': 'il refertino', 'upload_date': datetime.date(2022, 5, 9), 'path': '../../reports/38fb4daa-7a5a-4cef-9fe8-8acb7014cad9.pdf', 'upload_by': '8e9f97ec-7030-4c13-933c-7e3e1ad97628'}
COMMIT
BEGIN (implicit)
SELECT person_report.id, person_report.pf_id, person_report.title, person_report.upload_date, person_report.path, person_report.upload_by 
FROM person_report 
WHERE person_report.id = %(pk_1)s
[cached since 1646s ago] {'pk_1': '38fb4daa-7a5a-4cef-9fe8-8acb7014cad9'}
ROLLBACK
172.22.0.1:47288 - "POST /reports/upload HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 1665s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:47288 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
172.22.0.1:47416 - "OPTIONS /reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[cached since 1763s ago] {'user_id_1': '45d3b336-9ba5-4674-b9e5-c092614992c1', 'param_1': 1}
ROLLBACK
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 3197s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c'}
ROLLBACK
172.22.0.1:47420 - "GET /reports HTTP/1.1" 200
172.22.0.1:47476 - "GET /session/reports HTTP/1.1" 404
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 3239s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c'}
ROLLBACK
172.22.0.1:47472 - "GET /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c HTTP/1.1" 200
172.22.0.1:47484 - "OPTIONS /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report 
WHERE person_report.id IN (%(id_1_1)s)
[cached since 3213s ago] {'id_1_1': '38fb4daa-7a5a-4cef-9fe8-8acb7014cad9'}
ROLLBACK
172.22.0.1:47488 - "POST /session/reports HTTP/1.1" 200
172.22.0.1:47506 - "GET /session/reports HTTP/1.1" 200
172.22.0.1:47506 - "GET /session/reports HTTP/1.1" 200
172.22.0.1:47512 - "OPTIONS /permissions HTTP/1.1" 200
172.22.0.1:47506 - "GET /session/reports HTTP/1.1" 200
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM permission 
WHERE permission.user_id = %(user_id_1)s AND permission.document_id IN (%(document_id_1_1)s)
[cached since 3202s ago] {'user_id_1': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'document_id_1_1': '38fb4daa-7a5a-4cef-9fe8-8acb7014cad9'}
ROLLBACK
BEGIN (implicit)
INSERT INTO permission (user_id, document_id, permission, created, pending) VALUES (%(user_id)s, %(document_id)s, %(permission)s, %(created)s, %(pending)s)
[cached since 3202s ago] {'user_id': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'document_id': '38fb4daa-7a5a-4cef-9fe8-8acb7014cad9', 'permission': False, 'created': datetime.date(2022, 5, 9), 'pending': True}
COMMIT
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM permission 
WHERE permission.user_id = %(user_id_1)s AND permission.document_id IN (NULL) AND (1 != 1)
[cached since 3202s ago] {'user_id_1': '8e9f97ec-7030-4c13-933c-7e3e1ad97628'}
ROLLBACK
172.22.0.1:47516 - "POST /permissions HTTP/1.1" 200
172.22.0.1:47516 - "DELETE /session/reports HTTP/1.1" 200
172.22.0.1:47506 - "GET /session/reports HTTP/1.1" 404
172.22.0.1:47530 - "OPTIONS /permissions HTTP/1.1" 200
BEGIN (implicit)
SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM (SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by 
FROM person_report) AS anon_1 JOIN permission ON anon_1.person_report_id = permission.document_id 
WHERE anon_1.person_report_pf_id = %(pf_id_1)s AND permission.pending = true
[cached since 1798s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c'}
ROLLBACK
172.22.0.1:47534 - "GET /permissions HTTP/1.1" 200
172.22.0.1:47548 - "OPTIONS /permissions HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person 
WHERE person.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[cached since 1853s ago] {'user_id_1': '45d3b336-9ba5-4674-b9e5-c092614992c1', 'param_1': 1}
ROLLBACK
BEGIN (implicit)
SELECT anon_1.permission_user_id AS anon_1_permission_user_id, anon_1.permission_document_id AS anon_1_permission_document_id, anon_1.permission_permission AS anon_1_permission_permission, anon_1.permission_created AS anon_1_permission_created, anon_1.permission_pending AS anon_1_permission_pending 
FROM (SELECT permission.user_id AS permission_user_id, permission.document_id AS permission_document_id, permission.permission AS permission_permission, permission.created AS permission_created, permission.pending AS permission_pending 
FROM permission) AS anon_1 JOIN person_report ON person_report.id = anon_1.permission_document_id 
WHERE person_report.pf_id = %(pf_id_1)s AND anon_1.permission_pending = true AND (anon_1.permission_user_id, anon_1.permission_document_id) IN ((%(param_1_1_1)s, %(param_1_1_2)s))
[cached since 1714s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c', 'param_1_1_1': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'param_1_1_2': '38fb4daa-7a5a-4cef-9fe8-8acb7014cad9'}
UPDATE permission SET permission=%(permission)s, pending=%(pending)s WHERE permission.user_id = %(permission_user_id)s AND permission.document_id = %(permission_document_id)s
[cached since 1714s ago] {'permission': True, 'pending': False, 'permission_user_id': '8e9f97ec-7030-4c13-933c-7e3e1ad97628', 'permission_document_id': '38fb4daa-7a5a-4cef-9fe8-8acb7014cad9'}
COMMIT
172.22.0.1:47552 - "PATCH /permissions HTTP/1.1" 200
BEGIN (implicit)
SELECT person.id AS person_id, person.created_by AS person_created_by, person.owner_id AS person_owner_id, person.user_id AS person_user_id, person.is_dead AS person_is_dead, person.death_date AS person_death_date, person.cf AS person_cf, person.cui_code AS person_cui_code, person.firstname AS person_firstname, person.lastname AS person_lastname, person.fullname AS person_fullname, person.nicknames AS person_nicknames, person.gender AS person_gender, person.birth_date AS person_birth_date, person.verified AS person_verified, person.created AS person_created, person.updated AS person_updated, person.sanitary_district_id AS person_sanitary_district_id, person.is_anonymous AS person_is_anonymous, person.is_foreign AS person_is_foreign, person.birth_city AS person_birth_city, person.birth_geoarea_id AS person_birth_geoarea_id, person.birth_nation_id AS person_birth_nation_id 
FROM person ORDER BY person.firstname DESC, person.lastname DESC, person.nicknames DESC, person.cf DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[cached since 1771s ago] {'param_1': 10, 'param_2': 0}
ROLLBACK
172.22.0.1:47562 - "GET /search/pf?firstname=&lastname=&nicknames= HTTP/1.1" 200
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 3299s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c'}
ROLLBACK
172.22.0.1:47562 - "GET /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c HTTP/1.1" 200
172.22.0.1:47568 - "GET /session/reports HTTP/1.1" 404
BEGIN (implicit)
SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".pwd AS user_pwd, "user".role AS user_role, "user".first_access AS user_first_access 
FROM "user" 
WHERE "user".username = %(username_1)s 
 LIMIT %(param_1)s
[cached since 2603s ago] {'username_1': 'admin', 'param_1': 1}
ROLLBACK
172.22.0.1:48574 - "POST /auth HTTP/1.1" 200
172.22.0.1:48590 - "GET /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c%09 HTTP/1.1" 403
172.22.0.1:48706 - "GET /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c%09 HTTP/1.1" 403
loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
select pg_catalog.version()
[raw sql] {}
select current_schema()
[raw sql] {}
show standard_conforming_strings
[raw sql] {}
BEGIN (implicit)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[generated in 0.00026s] {'name': 'person_document'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.002258s ago] {'name': 'person'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.003251s ago] {'name': 'person_address'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.004303s ago] {'name': 'person_citizenship'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.005332s ago] {'name': 'person_marital_status'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.006325s ago] {'name': 'user'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.007307s ago] {'name': 'person_report'}
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
[cached since 0.008421s ago] {'name': 'permission'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[generated in 0.00028s] {'typname': 'gender'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.001988s ago] {'typname': 'alpha3_codes'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.00345s ago] {'typname': 'address_types'}

            SELECT EXISTS (
                SELECT * FROM pg_catalog.pg_type t
                WHERE t.typname = %(typname)s
                AND pg_type_is_visible(t.oid)
                )
                
[cached since 0.005006s ago] {'typname': 'marital_status_codes'}
COMMIT
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[generated in 0.00030s] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c\t'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/report_repository.py", line 40, in get_reports
    raise ReportNotFoundError(pf_id)
repositories.repository_exceptions.ReportNotFoundError: Report not found, id: 3c8cc747-a8d8-4d7f-a82f-4584b747c26c	
ROLLBACK
172.22.0.1:53260 - "GET /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c%09 HTTP/1.1" 404
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 7.951s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c\t'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/report_repository.py", line 40, in get_reports
    raise ReportNotFoundError(pf_id)
repositories.repository_exceptions.ReportNotFoundError: Report not found, id: 3c8cc747-a8d8-4d7f-a82f-4584b747c26c	
ROLLBACK
172.22.0.1:53272 - "GET /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c%09 HTTP/1.1" 404
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 35.93s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c\t'}
Session rollback because of exception
Traceback (most recent call last):
  File "/home/SPES/src/openapi_server/./database/database.py", line 48, in session
    yield session
  File "/home/SPES/src/openapi_server/./repositories/report_repository.py", line 40, in get_reports
    raise ReportNotFoundError(pf_id)
repositories.repository_exceptions.ReportNotFoundError: Report not found, id: 3c8cc747-a8d8-4d7f-a82f-4584b747c26c	
ROLLBACK
172.22.0.1:53310 - "GET /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c%09 HTTP/1.1" 404
BEGIN (implicit)
SELECT person_report.id AS person_report_id, person_report.pf_id AS person_report_pf_id, person_report.title AS person_report_title, person_report.upload_date AS person_report_upload_date, person_report.path AS person_report_path, person_report.upload_by AS person_report_upload_by, permission_1.user_id AS permission_1_user_id, permission_1.document_id AS permission_1_document_id, permission_1.permission AS permission_1_permission, permission_1.created AS permission_1_created, permission_1.pending AS permission_1_pending 
FROM person_report LEFT OUTER JOIN permission AS permission_1 ON person_report.id = permission_1.document_id 
WHERE person_report.pf_id = %(pf_id_1)s
[cached since 136.4s ago] {'pf_id_1': '3c8cc747-a8d8-4d7f-a82f-4584b747c26c'}
ROLLBACK
172.22.0.1:53368 - "GET /reports/pf/3c8cc747-a8d8-4d7f-a82f-4584b747c26c HTTP/1.1" 200
